<div class="container">
    <div>
        <h1>Profile</h1>
    </div>
    <mat-card>
        <mat-card-header>
            <div style="display: flex; justify-content: flex-end; width: 100%;">
                <button mat-icon-button (click)="onEditToggle()">
                    <mat-icon *ngIf="!edit; else noEdit">
                        edit
                    </mat-icon>
                    <ng-template #noEdit>
                        <mat-icon>
                            edit_off
                        </mat-icon>
                    </ng-template>
                </button>
            </div>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="profile">
                <table>
                    <tr>
                        <td colspan="2" style="width: 400px;">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Name</mat-label>
                                <input formControlName="name" matInput matInput required>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Address</mat-label>
                                <textarea formControlName="address" matInput [matTextareaAutosize]="true"
                                    [matAutosizeMinRows]="1" [matAutosizeMaxRows]="5" required></textarea>
                                <mat-icon matSuffix>my_location</mat-icon>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Phone</mat-label>
                                <input formControlName="phone" matInput placeholder="9881236758" required>
                                <mat-icon matSuffix>phone</mat-icon>
                            </mat-form-field>
                        </td>
                    </tr>
                    <div style="height: 10px;"></div>
                    <tr *ngIf="role == 'patient'">
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Medical History</mat-label>
                                <textarea formControlName="medicalHistory" matInput [matTextareaAutosize]="true"
                                    [matAutosizeMinRows]="1" [matAutosizeMaxRows]="5"></textarea>
                                <mat-icon matSuffix>medical_services</mat-icon>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="1">
                            <span>Sex: </span>
                            &nbsp;
                            <mat-radio-group formControlName="sex">
                                <mat-radio-button value="Male">Male</mat-radio-button>
                                &nbsp;
                                <mat-radio-button value="Female">Female</mat-radio-button>
                                &nbsp;
                                <mat-radio-button value="Other">Other</mat-radio-button>
                            </mat-radio-group>
                        </td>
                        <td colspan="1" *ngIf="role == 'patient'">
                            <mat-checkbox formControlName="marital">
                                I'm married
                            </mat-checkbox>
                        </td>
                    </tr>
                    <div style="height: 10px;"></div>
                    <tr>
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Email</mat-label>
                                <input formControlName="email" matInput required>
                                <mat-icon matSuffix>email</mat-icon>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr *ngIf="edit">
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Password</mat-label>
                                <input formControlName="password" matInput [type]="hide ? 'password' : 'text'" required>
                                <button mat-icon-button matSuffix (click)="hide = !hide"
                                    [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr *ngIf="edit">
                        <td colspan="2">
                            <mat-form-field appearance="fill" class="demo-full-width">
                                <mat-label>Confirm Password</mat-label>
                                <input formControlName="confPassword" matInput [type]="hide ? 'password' : 'text'"
                                    required>
                                <button mat-icon-button matSuffix (click)="hide = !hide"
                                    [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                </button>
                            </mat-form-field>
                        </td>
                    </tr>
                </table>
            </form>
        </mat-card-content>
        <mat-card-actions *ngIf="edit">
            <button mat-raised-button color="warn" (click)="onClear()">Clear</button>
            &nbsp;
            <button mat-raised-button color="primary" [disabled]="!this.profile.valid"
                (click)="onSubmit()">Submit</button>
        </mat-card-actions>
    </mat-card>
</div>